## 事件描述
在做这么一块的业务开发，开发一个配置页面，由三张表分别是配置表，配置项表，
配置项条件表的增删改接口，设计时是前端传入dto我对dto进行拆分，然后配置项和
配置条件表采用先删再插入的方式进行维护，以达到增删改的目的。

在断点测试过程中控制台突然报出了异常，没有细看错误大致看了下跟数据库有关就直接关了服务。
这个时候问题就来了，我去库里删测试数据的时候发现查询数据正常，更新删除行数据以及删除表均异常。
我意识到很明显我碰到了锁表。

## 排查过程
```mysql
#查询数据库当前的运行线程
SHOW PROCESSLIST;
#此时没有发现跟我的表相关的处理进行，但是只有我的表锁了那肯定是有问题的
select * from information_schema.innodb_trx;
#发现了有一条事务已经运行了半个小时，问题是找到了，杀死事务的线程id就行了
#不过很奇怪之前查运行线程的时候为什么没有查到
kill 15758 
```
## 总结
由于发生问题的时候没有及时的去查看控制台报错，所以问题也没法完全的分析出来，有两个推测；

1.由于断点调试以及直接关闭服务，导致了事务没有提交，但是问题是控制台抛出了异常，那么事务应该由于异常结束才对

2.由于设计原因，写法出现了问题，所以导致数据库出现了死锁，导致事务一直hold在这里。

所以本质上来说这次并没有找出来原因，但是学习了一下碰到这种问题的排查过程
